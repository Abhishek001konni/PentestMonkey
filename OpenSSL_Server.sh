
#---------------#---------#  
W='\033[0m'  # White   #
R='\033[0;31m' # Red     #
G='\033[0;32m' # Green   #
O='\033[0;33m' # Orange  #
B='\033[0;34m' # Blue    #
P='\033[0;35m' # Purple  #
C='\033[0;36m' # Cyan    #
M='\033[0;35m' # Magenta #
Y='\033[0;33m' # Yellow  #
#---------------#---------#

port=$1
datetime=$(date +%s)
flag="NOT FOUND"
keyname=$(ls | grep $port.*.pem)
certname=$(ls | grep $port.*.crt)

if [[ "$keyname" = "" || "$certname" = "" ]]
then
	keyname=$(echo $port.$datetime).pem
	certname=$(echo $port.$datetime).crt
	
	echo -e $B"[+] $W Generating cert and key...."
	openssl req -x509 -newkey rsa:4096 -keyout $keyname -out $certname -days 365 -nodes
fi
	


echo -e $G"[+] $W Starting server on port $B $port$W..."
openssl s_server -quiet -key $keyname -cert $certname -port $port
